// ============================================================
// Usability — Niri / DMS
// Enhanced UX improvements: animations, overview, gestures,
// scroll behaviour, and focus policy.
// ============================================================


// ============================================================
// ANIMATIONS
// Smooth, Material-inspired motion curves.
// Remove `off` from any section to disable it individually.
// ============================================================
animations {
    // Global speed multiplier. < 1 = faster, > 1 = slower.
    // 0.7 gives a very snappy and high-performance feel.
    slowdown 0.7

    // Window open/close
    window-open {
        duration-ms 200
        curve "ease-out-expo"
    }
    window-close {
        duration-ms 150
        curve "ease-out-quad"
    }

    // Window movement (column drag & resize)
    window-movement {
        duration-ms 200
        curve "ease-out-expo"
    }

    // Resize while tiling (makes manual resizing feel instant)
    window-resize {
        duration-ms 180
        curve "ease-out-expo"
    }

    // Column scrolling (horizontal workspace navigation)
    horizontal-view-movement {
        duration-ms 220
        curve "ease-out-expo"
    }

    // Workspace switching (vertical)
    workspace-switch {
        duration-ms 250
        curve "ease-out-expo"
    }

    // Config reload fade
    config-notification-open-close {
        duration-ms 300
        curve "ease-out-expo"
    }
    
    // Floating window animations
    floating-window-move {
        duration-ms 180
        curve "ease-out-expo"
    }
    
    // Focus change animations
    focus-change {
        duration-ms 100
        curve "ease-out"
    }
}

// ============================================================
// ENHANCED OVERVIEW
// ============================================================
overview {
    zoom 0.3
    // Show workspace names with better styling
    workspace-labels {
        font "sans-serif"
        size 14
        color "#FFFFFF"
        background "#00000080"
        padding 8
        corner-radius 6
    }
    // Add blur effect to background
    background-blur {
        radius 32
        brightness 0.8
    }
}




// ============================================================
// HOTKEY OVERLAY
// The pop-up shown on first launch listing all keybindings.
// ============================================================
hotkey-overlay {
    // Comment the next line to re-enable the startup overlay.
    skip-at-startup
}


// ============================================================
// LAYER RULES — Panel / Overlay Usability
// Ensures notifications and bars don't steal focus unexpectedly.
// ============================================================

// Notification daemon (swaync): allow interactivity but don't grab focus
layer-rule {
    match namespace="swaync-control-center"
    // Keep above regular windows but below system chrome
    // place-within-backdrop false  // default
}

// Fuzzel launcher: block keyboard during open (default behaviour — explicit)
layer-rule {
    match namespace="fuzzel"
    // Fuzzel handles focus itself; no additional rules needed.
}

// DMS shell: live behind everything as the backdrop
layer-rule {
    match namespace="dms:blurwallpaper"
    place-within-backdrop true
}

// Waybar: if re-enabled, don't pop above fullscreen windows
layer-rule {
    match namespace="waybar"
    // place-within-backdrop false
}


// ============================================================
// WINDOW RULES — Additional Usability Behaviours
// (Complements dms/windowrules.kdl)
// ============================================================

// Prefer no client-side decorations — niri draws the focus ring
// properly around ALL windows instead of having them draw their own.
// This removes double-borders and reduces visual noise.
// NOTE: restart apps after toggling this.
// prefer-no-csd  ← kept off here; enable in config.kdl if desired

// Center-focused-column: "on-overflow" gives smart centering —
// columns are only centred when they'd otherwise go partially off-screen.
// (Defined in config.kdl layout block; reference here for documentation.)

// Focus follows mouse — already enabled in config.kdl input section.
// max-scroll-amount="0%" limits warp to windows already fully visible.
